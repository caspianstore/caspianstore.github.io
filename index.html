<!DOCTYPE html>
<html lang="az">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Caspian Store | Ultimate</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --bg: #000000;
            --card: #1c1c1e;
            --primary: #0A84FF;
            --accent: #30D158;
            --danger: #FF453A;
            --gold: #FFD700;
            --text: #FFFFFF;
            --text-sec: #8E8E93;
            --glass: rgba(28, 28, 30, 0.85);
        }
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

        body {
            background-color: var(--bg);
            color: var(--text);
            font-family: -apple-system, BlinkMacSystemFont, "SF Pro Text", "Segoe UI", Roboto, sans-serif;
            margin: 0;
            overflow-x: hidden;
            padding-bottom: 80px;
        }

        /* Animations */
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes slideDown { from { transform: translateY(-100%); } to { transform: translateY(0); } }
        @keyframes pulse { 0% { box-shadow: 0 0 0 0 rgba(10, 132, 255, 0.7); } 70% { box-shadow: 0 0 0 10px rgba(10, 132, 255, 0); } 100% { box-shadow: 0 0 0 0 rgba(10, 132, 255, 0); } }

        /* HEADER */
        header {
            position: fixed; top: 0; left: 0; right: 0;
            padding: 15px 20px;
            background: var(--glass);
            backdrop-filter: blur(20px);
            z-index: 100; border-bottom: 0.5px solid #333;
            display: flex; flex-direction: column; gap: 10px;
        }
        .header-top { display: flex; justify-content: space-between; align-items: center; }
        .logo { font-size: 20px; font-weight: 800; letter-spacing: -0.5px; background: linear-gradient(to right, #fff, #888); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        
        /* SEARCH BAR */
        .search-container { position: relative; width: 100%; }
        .search-input {
            width: 100%; background: #2c2c2e; border: none; padding: 10px 40px 10px 15px;
            border-radius: 10px; color: white; font-size: 14px;
        }
        .search-icon { position: absolute; right: 15px; top: 50%; transform: translateY(-50%); color: #666; }

        /* MAIN CONTENT */
        .container { padding: 110px 20px 20px 20px; }

        /* LOGIN OVERLAY (iOS Style) */
        #login-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.8); backdrop-filter: blur(15px);
            z-index: 9999; display: flex; align-items: center; justify-content: center;
            flex-direction: column; animation: fadeIn 0.5s;
        }
        .login-box {
            background: #1c1c1e; width: 85%; padding: 30px; border-radius: 20px;
            text-align: center; border: 1px solid #333;
            box-shadow: 0 20px 50px rgba(0,0,0,0.5);
        }

        /* CATEGORIES */
        .cat-scroll { display: flex; gap: 10px; overflow-x: auto; padding-bottom: 10px; margin-bottom: 20px; }
        .cat-scroll::-webkit-scrollbar { display: none; }
        .cat-pill {
            background: #2c2c2e; padding: 8px 16px; border-radius: 20px;
            white-space: nowrap; font-size: 13px; font-weight: 600; color: #ccc;
            border: 1px solid transparent; transition: 0.3s;
        }
        .cat-pill.active { background: var(--primary); color: white; border-color: var(--primary); }

        /* AD CARDS */
        .ad-card {
            background: var(--card); border-radius: 18px; margin-bottom: 20px;
            overflow: hidden; border: 1px solid #2c2c2e; position: relative;
            animation: fadeIn 0.6s ease;
        }
        .ad-card.hot-ad { border: 1px solid var(--gold); box-shadow: 0 0 15px rgba(255, 215, 0, 0.2); }
        .hot-badge {
            position: absolute; top: 10px; right: 10px; background: var(--gold); color: black;
            font-size: 10px; padding: 4px 8px; border-radius: 10px; font-weight: 800; z-index: 2;
        }
        .verified-badge { color: #1DA1F2; margin-left: 4px; font-size: 14px; }
        
        .ad-img { width: 100%; height: 220px; object-fit: cover; background: #222; }
        .ad-content { padding: 15px; }
        .ad-price { font-size: 20px; font-weight: 700; color: var(--accent); }
        .ad-title { font-size: 17px; margin: 5px 0; font-weight: 600; display: flex; align-items: center; }
        .ad-meta { font-size: 12px; color: var(--text-sec); display: flex; justify-content: space-between; margin-bottom: 12px; }

        /* BUTTONS */
        .btn { padding: 12px; border-radius: 12px; border: none; font-weight: 600; cursor: pointer; width: 100%; margin-top: 5px; }
        .btn-primary { background: var(--primary); color: white; }
        .btn-gold { background: linear-gradient(135deg, #FFD700, #FFA500); color: black; }
        .btn-glass { background: rgba(255,255,255,0.1); color: white; }
        .btn-danger { background: rgba(255, 69, 58, 0.2); color: var(--danger); }

        /* FAB */
        .fab {
            position: fixed; bottom: 30px; right: 20px; width: 55px; height: 55px;
            background: var(--primary); border-radius: 50%; display: flex; align-items: center; justify-content: center;
            box-shadow: 0 10px 30px rgba(10,132,255,0.4); z-index: 500; font-size: 22px; color: white;
        }

        /* MODAL */
        .sheet-modal {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.6); backdrop-filter: blur(5px);
            z-index: 2000; display: none; align-items: flex-end;
        }
        .sheet-content {
            background: #1c1c1e; width: 100%; padding: 25px 20px 40px 20px;
            border-radius: 30px 30px 0 0; animation: slideDown 0.4s cubic-bezier(0.2, 0.8, 0.2, 1) reverse; /* Up animation simulated */
            max-height: 90vh; overflow-y: auto;
        }
        
        input, select, textarea {
            width: 100%; background: #2c2c2e; border: none; padding: 15px;
            border-radius: 12px; color: white; margin-bottom: 10px; font-size: 16px;
        }
        
        .empty-state { text-align: center; padding: 50px 20px; color: #555; }
        .admin-panel { padding: 10px; background: #222; border-radius: 10px; margin-top: 10px; border: 1px solid #444; }

    </style>
</head>
<body>

    <div id="login-overlay">
        <div class="login-box">
            <i class="fas fa-shield-alt" style="font-size: 40px; color: var(--primary); margin-bottom: 20px;"></i>
            <h2 style="margin:0 0 10px 0;">Caspian Store</h2>
            <p style="color: #888; font-size: 13px; margin-bottom: 20px;">Davam etm…ôk √º√ß√ºn l…ôq…ôb se√ßin.</p>
            <input type="text" id="login-name" placeholder="Adƒ±nƒ±z (m…ôs: User01)" style="text-align: center;">
            <div id="admin-pass-field" style="display: none;">
                <input type="password" id="login-pass" placeholder="Admin Kodu" style="text-align: center;">
            </div>
            <button class="btn btn-primary" onclick="attemptLogin()">Giri≈ü Et</button>
        </div>
    </div>

    <div id="app" style="display: none;">
        <header>
            <div class="header-top">
                <div class="logo">CASPIAN STORE</div>
                <div style="font-size: 11px; color: var(--text-sec);" id="user-badge">ID: Loading...</div>
            </div>
            <div class="search-container">
                <input type="text" class="search-input" id="search-bar" placeholder="Axtar (Oyun adƒ±, ID, s√∂z...)" onkeyup="handleSearch()">
                <i class="fas fa-search search-icon"></i>
            </div>
        </header>

        <div class="container">
            <div class="cat-scroll">
                <div class="cat-pill active" onclick="filterAds('all', this)">B√ºt√ºn</div>
                <div class="cat-pill" onclick="filterAds('Pubg', this)">Pubg</div>
                <div class="cat-pill" onclick="filterAds('Black Russia', this)">Black Russia</div>
                <div class="cat-pill" onclick="filterAds('Free Fire', this)">Free Fire</div>
                <div class="cat-pill" onclick="filterAds('Instagram', this)">Instagram</div>
                <div class="cat-pill" onclick="filterAds('TikTok', this)">TikTok</div>
            </div>

            <h3 style="opacity: 0.7; margin-bottom: 15px;">Son Elanlar</h3>
            <div id="ads-list">
                <div class="empty-state">
                    <i class="fas fa-spinner fa-spin"></i> Y√ºkl…ônir...
                </div>
            </div>
        </div>

        <div class="fab" onclick="openModal('addModal')"><i class="fas fa-plus"></i></div>

        <div id="admin-tools-modal" class="sheet-modal">
            <div class="sheet-content">
                <h3>Admin ƒ∞dar…ôetm…ô</h3>
                <input type="text" id="admin-target-id" placeholder="ƒ∞stifad…ô√ßi ID-si yaz">
                <button class="btn btn-primary" onclick="adminAction('verify')">Mavi Tik Ver</button>
                <button class="btn btn-danger" onclick="adminAction('ban')">Bu ID-ni BAN et</button>
                <button class="btn btn-glass" onclick="closeModal('admin-tools-modal')">Baƒüla</button>
            </div>
        </div>

        <div id="addModal" class="sheet-modal">
            <div class="sheet-content">
                <div style="width:40px; height:5px; background:#444; margin:0 auto 20px auto; border-radius:10px;"></div>
                <h2 style="margin-top:0">Yeni Elan</h2>
                <select id="new_cat">
                    <option value="Pubg">Pubg Mobile</option>
                    <option value="Black Russia">Black Russia</option>
                    <option value="Free Fire">Free Fire</option>
                    <option value="Brawl Stars">Brawl Stars</option>
                    <option value="Instagram">Instagram</option>
                    <option value="TikTok">TikTok</option>
                </select>
                <input type="text" id="new_title" placeholder="Ba≈ülƒ±q (m…ôs: 70 lvl, Full set)">
                <input type="number" id="new_price" placeholder="Qiym…ôt (AZN)">
                <input type="tel" id="new_wp" placeholder="WhatsApp (m…ôs: 0501234567)">
                <textarea id="new_desc" rows="3" placeholder="Hesab haqqƒ±nda m…ôlumat..."></textarea>
                
                <label style="color: #aaa; font-size: 13px; margin-left: 5px;">Elan ≈û…ôkli se√ßin:</label>
                <input type="file" id="new_img_file" accept="image/*" style="padding: 10px;">
                <p id="upload-status" style="font-size: 12px; color: var(--accent); display:none;">≈û…ôkil y√ºkl…ônir...</p>

                <button class="btn btn-primary" onclick="uploadAndPublish()">Payla≈ü</button>
                <button class="btn btn-glass" onclick="closeModal('addModal')">L…ôƒüv et</button>
            </div>
        </div>
    </div>

    <script type="module">
        // -------------------------------------------------------------
        // Dƒ∞QQ∆èT: A≈ûAƒûIDAKƒ∞ KODLARI √ñZ FIREBASE KODLARINLA D∆èYƒ∞≈û!
        // -------------------------------------------------------------
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getFirestore, collection, addDoc, getDocs, doc, updateDoc, deleteDoc, query, orderBy, where, getDoc, setDoc } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";
        import { getStorage, ref, uploadBytes, getDownloadURL } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-storage.js";

        const firebaseConfig = {
            apiKey: "SENIN_API_KEY_KODUN",
            authDomain: "SENIN_PROJECT.firebaseapp.com",
            projectId: "SENIN_PROJECT_ID",
            storageBucket: "SENIN_PROJECT.appspot.com",
            messagingSenderId: "SENDER_ID",
            appId: "APP_ID"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        const storage = getStorage(app);

        // --- GLOBAL VARIABLES ---
        let currentUser = null;
        let allAds = [];

        // --- 1. USER SYSTEM & LOGIN ---
        window.attemptLogin = async function() {
            const nameInput = document.getElementById('login-name');
            const passInput = document.getElementById('login-pass');
            const name = nameInput.value.trim();

            if (!name) return alert("Adƒ±nƒ±zƒ± yazƒ±n!");

            // Admin Check
            if (name === "Adm19") {
                document.getElementById('admin-pass-field').style.display = 'block';
                if (passInput.value !== "said01") {
                    return; // Pass wait
                }
            }

            // Generate or Load ID
                container.innerHTML = '<div class="empty-state"><h3>Bura bo≈üdur.</h3><p>H…ôl…ô ki, he√ß bir elan yoxdur.</p></div>';
                return;
            }

            container.innerHTML = '';

            adsArray.forEach(ad => {
                // Hot Status Check
                let isHot = ad.isHot && ad.hotUntil > Date.now();
                let hotClass = isHot ? 'hot-ad' : '';
                let hotBadge = isHot ? '<div class="hot-badge">üî• HOT</div>' : '';

                // Admin Controls
                let adminControls = '';
                if (currentUser.isAdmin) {
                    adminControls = `
                        <div class="admin-panel">
                            <button class="btn-mini" onclick="deleteAd('${ad.uid}')" style="color:red">Sil</button>
                            <button class="btn-mini" onclick="makeHot('${ad.uid}', 24)" style="color:orange">üî• 24s</button>
                        </div>
                    `;
                } else if (currentUser.id == ad.sellerId) {
                    adminControls = `<button class="btn btn-danger" style="margin-top:10px" onclick="deleteAd('${ad.uid}')">Elanƒ± Sil</button>`;
                }

// Verified Badge
let verifiedIcon = ad.sellerVerified ? 
'<i class="fas fa-check-circle verified-badge" title="T…ôsdiql…ônmi≈ü Satƒ±cƒ±"></i>' : '';

container.innerHTML += `
    <div class="ad-card ${hotClass}">
        ${hotBadge}
        <img src="${ad.img}" class="ad-img" loading="lazy">
        <div class="ad-content">
            <div class="ad-meta">
                <span>${ad.cat}</span>
                <span>ID: #${ad.sellerId}</span>
            </div>
            <div style="display:flex; justify-content:space-between; align-items:center;">
                <h3 class="ad-title">${ad.title}</h3>
                <div class="ad-price">${ad.price} AZN</div>
            </div>
            <p style="font-size:13px; color:#aaa;">Satƒ±cƒ±: ${ad.sellerName} ${verifiedIcon}</p>
            
            <div style="display:flex; gap:10px;">
                <button class="btn btn-glass" onclick="window.open('https://wa.me/${ad.wp}')">Satƒ±cƒ±ya Yaz</button>
                <button class="btn btn-gold" onclick="contactAraci('${ad.uid}', '${ad.wp}')">Aracƒ± il…ô Al</button>
            </div>
            ${adminControls}
        </div>
    </div>


<script type="module">
    // 1. Kitabxanalarƒ± √ßaƒüƒ±rƒ±rƒ±q
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
    import { getFirestore, doc, getDoc, setDoc, updateDoc, deleteDoc, collection, query, orderBy, getDocs, addDoc } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";
    import { getStorage, ref, uploadBytes, getDownloadURL } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-storage.js";

    // 2. S∆èNƒ∞N FIREBASE KODLARIN (Buranƒ± m√ºtl…ôq doldur!)
    const firebaseConfig = {
        apiKey: "BURA_API_KEY_YAZ",
        authDomain: "BURA_PROJECT_ID.firebaseapp.com",
        projectId: "BURA_PROJECT_ID",
        storageBucket: "BURA_PROJECT_ID.appspot.com",
        messagingSenderId: "SENDER_ID",
        appId: "APP_ID"
    };

    // Global d…ôyi≈ü…ônl…ôr
    let db, storage, allAds = [];
    window.currentUser = null; // Useri qlobal edirik

    // 3. Firebase-i T…ôhl√ºk…ôsiz Ba≈ülatmaq
    try {
        const app = initializeApp(firebaseConfig);
        db = getFirestore(app);
        storage = getStorage(app);
        console.log("Firebase uƒüurla qo≈üuldu!");
    } catch (error) {
        console.error("Firebase X…ôtasƒ±:", error);
        alert("Sistem x…ôtasƒ±: Firebase a√ßarlarƒ± d√ºzg√ºn deyil v…ô ya internet yoxdur. (F12 basƒ±b Console-a bax)");
    }

    // ==========================================
    // 4. Gƒ∞Rƒ∞≈û FUNKSƒ∞YASI (∆èN VACƒ∞B Hƒ∞SS∆è)
    // ==========================================
    window.attemptLogin = async function() {
        console.log("Giri≈ü d√ºym…ôsi basƒ±ldƒ±..."); // Konsolda bunu g√∂rm…ôlis…ôn
        
        const nameInput = document.getElementById('login-name');
        const passInput = document.getElementById('login-pass');
        const name = nameInput.value.trim();

        if (!name) { 
            alert("Z…ôhm…ôt olmasa adƒ±nƒ±zƒ± yazƒ±n!"); 
            return; 
        }

        // Admin yoxlanƒ±≈üƒ±
        if (name === "Adm19") {
            const passField = document.getElementById('admin-pass-field');
            if (passField.style.display === 'none') {
                passField.style.display = 'block';
                return;
            }
            if (passInput.value !== "said01") {
                alert("≈ûifr…ô s…ôhvdir!");
                return;
            }
        }

        // ID Yaradƒ±lmasƒ± v…ô ya Y√ºkl…ônm…ôsi
        let storedId = localStorage.getItem('caspian_uid');
        if (!storedId) {
            storedId = Math.floor(10000 + Math.random() * 90000).toString();
            localStorage.setItem('caspian_uid', storedId);
        }

        // Firebase-d…ô istifad…ô√ßini yoxla (∆èg…ôr db i≈ül…ôyirs…ô)
        let isVerified = false;
        let isBanned = false;

        if (db) {
            try {
                const userRef = doc(db, "users", storedId);
                const userSnap = await getDoc(userRef);

                if (userSnap.exists()) {
                    const data = userSnap.data();
                    if (data.banned) {
                        alert("Sƒ∞Zƒ∞N ID BLOKLANIB: " + storedId);
                        return;
                    }
                    isVerified = data.verified || false;
                } else {
                    // Yeni istifad…ô√ßi
                    await setDoc(userRef, {
                        name: name,
                        id: storedId,
                        joined: new Date(),
                        banned: false,
                        verified: false
                    });
                }
            } catch (e) {
                console.warn("ƒ∞nternet z…ôifdir v…ô ya Firebase x…ôtasƒ±, oflayn davam edilir.", e);
            }
        }

        // Giri≈üi tamamla
        const isAdmin = (name === "Adm19");
        window.currentUser = { name, id: storedId, isAdmin, verified: isVerified || isAdmin };

        // Ekranƒ± d…ôyi≈ü
        document.getElementById('login-overlay').style.display = 'none';
        document.getElementById('app').style.display = 'block';

        // Badge yenil…ô
        let verifyBadge = window.currentUser.verified ? '<i class="fas fa-check-circle verified-badge" style="color:#1DA1F2; margin-left:5px;"></i>' : '';
        document.getElementById('user-badge').innerHTML = 
            `<span onclick="${isAdmin ? "openModal('admin-tools-modal')" : ""}">${name} | #${storedId} ${verifyBadge}</span>`;

        // Elanlarƒ± y√ºkl…ô
        if (db) loadAdsFromFirebase();
    };

    // ==========================================
    // Dƒ∞G∆èR FUNKSƒ∞YALAR (Hamsƒ±nƒ± window.-a baƒüla)
    // ==========================================
    
    window.loadAdsFromFirebase = async function() {
        if(!db) return;
        const container = document.getElementById('ads-list');
        container.innerHTML = '<div class="empty-state"><i class="fas fa-spinner fa-spin"></i> Y√ºkl…ônir...</div>';
        
        try {
            const q = query(collection(db, "ads"), orderBy("date", "desc"));
            const querySnapshot = await getDocs(q);
            allAds = [];
            querySnapshot.forEach((doc) => allAds.push({ uid: doc.id, ...doc.data() }));
            renderAds(allAds);
        } catch(e) {
            console.error("Elanlarƒ± √ß…ôk…ô bilm…ôdim:", e);
            container.innerHTML = '<div class="empty-state">X…ôta: Elanlar y√ºkl…ônm…ôdi.</div>';
        }
    }

    window.renderAds = function(adsArray) {
        const container = document.getElementById('ads-list');
        if (adsArray.length === 0) {
            container.innerHTML = '<div class="empty-state"><h3>Elan yoxdur</h3></div>';
            return;
        }
        container.innerHTML = '';
        adsArray.forEach(ad => {
            let isHot = ad.isHot && ad.hotUntil > Date.now();
            let hotClass = isHot ? 'hot-ad' : '';
            let hotBadge = isHot ? '<div class="hot-badge" style="position:absolute; top:10px; right:10px; background:gold; padding:2px 8px; border-radius:10px; font-weight:bold;">üî• HOT</div>' : '';
            let verifiedIcon = ad.sellerVerified ? '<i class="fas fa-check-circle" style="color:#1DA1F2;"></i>' : '';
            
            // Admin d√ºym…ôl…ôri
            let adminBtns = '';
            if(window.currentUser.isAdmin) {
                adminBtns = `<div style="margin-top:10px; border-top:1px solid #333; padding-top:5px;">
                    <button class="btn-mini" onclick="deleteAd('${ad.uid}')" style="color:red; background:none; border:none; cursor:pointer;">Sil</button>
                    <button class="btn-mini" onclick="makeHot('${ad.uid}', 24)" style="color:orange; background:none; border:none; cursor:pointer;">üî• Hot et</button>
                </div>`;
            }

            container.innerHTML += `
                <div class="ad-card ${hotClass}" style="position:relative; background:#1c1c1e; margin-bottom:15px; border-radius:15px; overflow:hidden; border: ${isHot ? '1px solid gold' : '1px solid #333'}">
                    ${hotBadge}
                    <img src="${ad.img}" style="width:100%; height:200px; object-fit:cover;">
                    <div style="padding:15px;">
                        <div style="display:flex; justify-content:space-between; color:#888; font-size:12px;">
                            <span>${ad.cat}</span><span>#${ad.sellerId}</span>
                        </div>
                        <h3>${ad.title}</h3>
                        <div style="font-size:20px; color:#30D158; font-weight:bold;">${ad.price} AZN</div>
                        <p style="font-size:12px; color:#aaa;">Satƒ±cƒ±: ${ad.sellerName} ${verifiedIcon}</p>
                        <button class="btn btn-glass" onclick="window.open('https://wa.me/${ad.wp}')" style="width:100%; padding:10px; border-radius:10px; border:none; background:rgba(255,255,255,0.1); color:#fff; cursor:pointer;">Satƒ±cƒ±ya Yaz</button>
                        ${adminBtns}
                    </div>
                </div>
            `;
        });
    }

    // Upload function
    window.uploadAndPublish = async function() {
        if(!db) return alert("Veril…ônl…ôr bazasƒ± qo≈üulmayƒ±b!");
        const file = document.getElementById('new_img_file').files[0];
        if(!file) return alert("≈û…ôkil se√ßin!");
        
        document.getElementById('upload-status').style.display = 'block';
        try {
            const storageRef = ref(storage, 'ads_images/' + Date.now() + '_' + file.name);
            await uploadBytes(storageRef, file);
            const url = await getDownloadURL(storageRef);
            
            await addDoc(collection(db, "ads"), {
                cat: document.getElementById('new_cat').value,
                title: document.getElementById('new_title').value,
                price: document.getElementById('new_price').value,
                wp: document.getElementById('new_wp').value,
                desc: document.getElementById('new_desc').value,
                img: url,
                sellerId: window.currentUser.id,
                sellerName: window.currentUser.name,
                sellerVerified: window.currentUser.verified,
                date: Date.now(), isHot: false, hotUntil: 0
            });
            alert("Payla≈üƒ±ldƒ±!");
            closeModal('addModal');
            loadAdsFromFirebase();
        } catch(e) {
            console.error(e);
            alert("X…ôta: " + e.message);
        }
        document.getElementById('upload-status').style.display = 'none';
    }

    // Helper functions
    window.deleteAd = async (id) => { if(confirm('Silirs…ôn?')) { await deleteDoc(doc(db, 'ads', id)); loadAdsFromFirebase(); }};
    window.makeHot = async (id, h) => { await updateDoc(doc(db, 'ads', id), {isHot:true, hotUntil: Date.now() + h*3600000}); alert('Hot oldu'); loadAdsFromFirebase(); };
    window.openModal = (id) => document.getElementById(id).style.display = 'flex';
    window.closeModal = (id) => document.getElementById(id).style.display = 'none';

</script>
    
    </body>
    </html>
